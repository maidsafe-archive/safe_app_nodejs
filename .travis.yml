env:
  global:
    - RUST_BACKTRACE=1
    - PATH=$PATH:$HOME/.cargo/bin:$HOME/rust/bin
    - secure: kkIKGaPMAaI02ozykYVAgONbscaqXhsb2tue5HrAuJLIVfSNtVrIokfuqpratq3cG5ZsmIVI/CwFBBHH1s318AqJj62JuVHc/2KgDVOLLBNkgCaMFjd74UtP6ejDIXBNHYKGGs57JZTGVdiYyRjcGQ/Hi6tTN+HLsUqdNSKkRvHDLE9AiO73jLpmOhm63Aa378PB+YvTXPpz4tbs+9628jfqob6LBA93EEjDe8oBt+zLBhQ8AlRb8l5mCusNKjuOEd4/PxUdRlZ6Ei/3sVHo2NwCxf3evbER1MNqGHCxQ1UkNdBiBW2T6Zz5v1iHW1N+UshWtzZLjdRr+0/gW5pXaakgoPvfuSjhMIMDf9rC5CYA5Kt9rVYfgnCDE/ZOjMaSo1VXll7xvQtcVFR1R5paBaJZzq4TSGDK4BkmDy+OgyJIWhX/l9iUDBh3ilb6brpbVxnJ+ATw9oI1kgBEAuREtsSvZPDjVuDPrwy6XnJFyIp4EE4NItdPLLtckraxfgnL2gAN8rTfWWCRg/uKWSGZ3smRKe87vT7cGvPcRcy4D3woCmJzHYlbLW8ErtwKLfAO8vcyXzcZXsuw6Kspw8J3Ar7r/h3HBBdnQmoPdFGzDk0O/swsyujRbdfao4jwQPXDo4ExzriM6JiTd4qFTfhDZ5mY9pHBhnpxrO9k7zTKnfA=

sudo: true
dist: trusty

os:
  - linux
  - osx
osx_image: xcode8.2

compiler:
  - gcc
  - clang

language: node_js

node_js:
  - "7"

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-4.8
      - desktop-file-utils
      - xdg-utils

cache:
  cargo: true
  directories:
    - node_modules

before_install:
  - "[[ ${TRAVIS_OS_NAME} = linux ]] && export CXX=g++-4.8 || echo 'skipped'"

install:
  - node --version
  - npm --version
  # also downloads the build for release version
  - npm install

script:
  - npm run lint
  - npm run test-cov-badge
  - coverage/publish-test-cov-badge.sh
